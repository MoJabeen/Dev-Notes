% Mo Jabeen Template for docs 

\documentclass[11pt]{scrartcl} % Font size

\input{structure.tex} % Include the file specifying the document structure and custom commands

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\title{	
	\normalfont\normalsize
	\vspace{20pt} % Whitespace
	{\huge Postgresql Cheat Sheet}\\ % The assignment title
	\vspace{12pt} % Whitespace
	\rule{\linewidth}{2pt}\\ % Thick bottom horizontal rule
}

\author{\small Mo D Jabeen} % Your name

\date{\normalsize\today} % Today's date (\today) or a custom date

\begin{document}

\maketitle % Print the title

\section{Start postgresql server}

Postgres users roles which handle authentication and authorization.

There is a server/client relationship model.\\

Choosing the database name and port to host the a new database. Begin a service to run
a database via brew.

\begin{itemize}
	\item \ l list databases
	\item \ d list tables in database
	\item psql -p [port] -U [user] : this connects to a db
	\item \ i run sql code
	\item \ copy to create CSV file
\end{itemize}

\section{Create tables}

\begin{lstlisting}[
	caption= Create table, % Caption above the listing
	language=python, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	CREATE TABLE table_name (
    column_name1 col_type (field_length) column_constraints,
    column_name2 col_type (field_length),
    column_name3 col_type (field_length)
	);

	CREATE TABLE playground ( #Table name playground
    equip_id serial PRIMARY KEY, 
	#columnName colType, Primary Key shows this value must be unique
	and not null
    
	type varchar (50) NOT NULL, 
	#Name type (field length) constraints: not NULL
 
	color varchar (25) NOT NULL,
 
	location varchar(25) check (location in ('north', 'south', 
	'west', 'east', 'northeast', 'southeast',
	 'southwest', 'northwest')),
	#checks value is one of 8 values
 
	install_date date
);

	#The length can be implied by the data type

\end{lstlisting}


\begin{lstlisting}[
	caption= add elements to table, % Caption above the listing
	language=python, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	INSERT INTO [db_name] (columns) VALUES (values per col);

	SELECT * FROM table; Show all values	

\end{lstlisting}

\begin{lstlisting}[
	caption= table commands, % Caption above the listing
	language=python, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	DROP [database name] # Delete db

	SELECT * FROM [] WHERE [] LIKE "" # Return entries like ""
	
	GROUP BY #Group by column value
	ORDER BY #Order return by chosen expression
	HAVING COUNT #Return with count of chosen expression

	NOT NULL #Ensure the entry is not empty
\end{lstlisting}

Can also use other math aggregate functions.

\section{Relational Database}

Tables can be linked to each other via reference ids.

\begin{itemize}
	\item Primary Key : Distinct id value for every entry
	\item UNIQUE : Ensures inputs between entries are unique
	\item DISTINCT : Query to get distinct entries
\end{itemize}

\begin{lstlisting}[
	caption= reference tables, % Caption above the listing
	language=python, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	FOREIGN KEY(fk_columns) 
	REFERENCES parent_table(parent_key_columns)
	#Use the referenced table id to link to the 
	Primary key of parent table

\end{lstlisting}

\begin{itemize}
	\item If a entry is referenced in another table it cannot be deleted 
	\item Cannot add an entry in parent table if referenced table does not exist
\end{itemize}

\begin{lstlisting}[
	caption= Join tables, % Caption above the listing
	language=python, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	JOIN [table] ON table.col = col
	#Show referenced entries on two tables

	LEFT JOIN #Show full parent table and referenced entries

\end{lstlisting}

\section{Data Types}

\begin{itemize}
	\item bigserial: Autoincrementing eight byte integer
	\item inet: host address
	\item box: rectangular box on a plane
	\item money: currency amount
	\item json
	\item time: with and without time zone
	\item timestamp
\end{itemize}

\section{Access via progam}

Libpq is the C software used to access postgres via a program.

\end{document}

%----------------------------------------------------------------------------------------
%	FIGURE EXAMPLE
%----------------------------------------------------------------------------------------

% \begin{figure}[h] % [h] forces the figure to be output where it is defined in the code (it suppresses floating)
% 	\centering
% 	\includegraphics[width=0.5\columnwidth]{IMAGE_NAME.jpg} % Example image
% 	\caption{European swallow.}
% \end{figure}

%----------------------------------------------------------------------------------------
% MATH EXAMPLES
%----------------------------------------------------------------------------------------

% \begin{align} 
% 	\label{eq:bayes}
% 	\begin{split}
% 		P(A|B) = \frac{P(B|A)P(A)}{P(B)}
% 	\end{split}					
% \end{align}

%----------------------------------------------------------------------------------------
%	LIST EXAMPLES
%----------------------------------------------------------------------------------------

% \begin{itemize}
% 	\item First item in a list 
% 		\begin{itemize}
% 		\item First item in a list 
% 			\begin{itemize}
% 			\item First item in a list 
% 			\item Second item in a list 
% 			\end{itemize}
% 		\item Second item in a list 
% 		\end{itemize}
% 	\item Second item in a list 
% \end{itemize}

%------------------------------------------------

% \subsection{Numbered List}

% \begin{enumerate}
% 	\item First item in a list 
% 	\item Second item in a list 
% 	\item Third item in a list
% \end{enumerate}

%----------------------------------------------------------------------------------------
%	TABLE EXAMPLE
%----------------------------------------------------------------------------------------

% \section{Interpreting a Table}

% \begin{table}[h] % [h] forces the table to be output where it is defined in the code (it suppresses floating)
% 	\centering % Centre the table
% 	\begin{tabular}{l l l}
% 		\toprule
% 		\textit{Per 50g} & \textbf{Pork} & \textbf{Soy} \\
% 		\midrule
% 		Energy & 760kJ & 538kJ\\
% 		Protein & 7.0g & 9.3g\\
% 		\bottomrule
% 	\end{tabular}
% 	\caption{Sausage nutrition.}
% \end{table}

%----------------------------------------------------------------------------------------
%	CODE LISTING EXAMPLE
%----------------------------------------------------------------------------------------

% \begin{lstlisting}[
% 	caption= Macro definition, % Caption above the listing
% 	language=python, % Use Julia functions/syntax highlighting
% 	frame=single, % Frame around the code listing
% 	showstringspaces=false, % Don't put marks in string spaces
% 	numbers=left, % Line numbers on left
% 	numberstyle=\large, % Line numbers styling
% 	]

% 	CODE

% \end{lstlisting}

%----------------------------------------------------------------------------------------
%	CODE LISTING FILE EXAMPLE
%----------------------------------------------------------------------------------------

% \lstinputlisting[
% 	caption=Luftballons Perl Script., % Caption above the listing
% 	label=lst:luftballons, % Label for referencing this listing
% 	language=Perl, % Use Perl functions/syntax highlighting
% 	frame=single, % Frame around the code listing
% 	showstringspaces=false, % Don't put marks in string spaces
% 	numbers=left, % Line numbers on left
% 	numberstyle=\tiny, % Line numbers styling
% 	]{luftballons.pl}

%------------------------------------------------
