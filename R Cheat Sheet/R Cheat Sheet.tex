% Mo Jabeen Template for docs 

\documentclass[11pt]{scrartcl} % Font size

\input{structure.tex} % Include the file specifying the document structure and custom commands

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------


\title{	
	\normalfont\normalsize
	\vspace{20pt} % Whitespace
	{\huge R Cheat Sheet}\\ % The meh
	\vspace{12pt} % Whitespace
	\rule{\linewidth}{2pt}\\ % Thick bottom horizontal rule
}

\author{\small Dainish Jabeen} % Your name

\date{\normalsize\today} % Today's date (\today) or a custom date

\begin{document}

\maketitle % Print the title

\section{Data Types}

Focus is on numerical types: Scalers, Vectors, Matrices, Data Frames and Lists.

\begin{lstlisting}[
	caption= General % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	x <- 28 #Initalise var

	vect <- c(1,10,100) #Initalise vector

	vect < 0 # Auto does per component iteration

	vect[(vect<0)] #Outputs all values < 0, () creates index

	(cond && cond ..) #Create multi condition index

\end{lstlisting}

\subsection{Matrix}

\begin{lstlisting}[
	caption= Matrix % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	matrix(data,nrow,ncol,byrow=T/F) #byrow if filled left to right

	a <- matrix(1:10,byrow=TRUE,nrow=5) #Creates 5x2 matrix 

	cbind(matrix,vector) #Combine matrix and vectors

	m[1,] #all elements of first row
	m[,1] #all elements of first col

\end{lstlisting}

\subsection{Data Frames}

\begin{lstlisting}[
	caption= Data Frames % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	data.frame(df,stringsAsFactors=T/F) # Converts strings to factors

	df[row,col]
	df[,c("col id 1","col id 2")]

	df$newcol <- newcol #Add new col

	subsetdf <- subset(df,subset=cond) #Create subset df

	df <- df[order(df$col),] #Arrange by col order

	df[,colnames(df) %in% list] #Output all col names in list
	
\end{lstlisting}


\begin{lstlisting}[
	caption= Data Frames Functions % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	select(df,cols) #Choose desired cols
	filter(df,cond)

	table(df) #Cont numb of observations per level

\end{lstlisting}

\textbf{Tibble data frames}

\begin{itemize}
	\item Can have list in cols
	\item Auto extends to match col rows 
\end{itemize}

\subsection{Lists}

Can hold any other data type in an array type.

\section{R Factor}

Categorize and store data, in categorical variables.

\[ factor(x=character(),levels,labels=levels,added=is.ordered(x))\]

Stores strings into categories to be used in ML tasks.

\section{Dplyr}

\begin{lstlisting}[
	caption= Combine data Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	left_join() #keep data from original
	right_join() #keep data from destination data

	inner_join() #exclude unmatched cols
	full_join() #keep everything

	mutate(df,var=condition,..) #Create new var 
	na.omit() #Remove all NA items

	na.rm = True #Ignore missing vals

	mutate(col_name=ifelse(condition,val,col)) #If condition met will replace col value with val

\end{lstlisting}

\section{Tidyr}

\begin{lstlisting}[
	caption= Manipulate data % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	gather() #Convert from wide to long (change inner vals into a new col)
	spread() #Convert from long to wide 
	
	separate() #Split data in a col to multiple cols
	unite() #Combine data from cols into a col

	diff() #Return lagged and iterated difference

\end{lstlisting}

\section{Functions}

\begin{lstlisting}[
	caption= Functions % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	function.name <- function(arg)
	{

	}
	
	rm{func} #removes func

\end{lstlisting}

\begin{lstlisting}[
	caption= Useful functions % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	ls(environment()) #Print currently global vars and funcs	

	apply(x,margin=1/2,func) #Apply func on all rows or cols (1:row,2:col)
	lapply(x,func) #Apply func output list
	sapply(x,func) #Output matrix
	tapply(x,index,func) #

	#Impute example

	new_df <- data.frame(
		sapply(df,function(col) ifelse(is.na(col),mean(x,na.rm=True),col))
	)

	summarise() #Basic stats

	group_by(col) #Group df by chosen id
	nth() #Goto nth val
	
	arrange() #Sort works with pipelines
	
\end{lstlisting}

\section{Loops}

Python like.

\begin{lstlisting}[
	caption= Loops % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	for item in list{

	}
		
\end{lstlisting}

\section{Pipeline}

Use the operator \% > \% to allow operations on the same data through stages.

\begin{lstlisting}[
	caption= Pipeline % Caption above the listing
	language=R, % Use Julia functions/syntax highlighting
	frame=single, % Frame around the code listing
	showstringspaces=false, % Don't put marks in string spaces
	numbers=left, % Line numbers on left
	numberstyle=\large, % Line numbers styling
	]

	New_df <- df %>%
	step_1 %>%
	step_2 ...
	
\end{lstlisting}


%----------------------------------------------------------------------------------------
%	FIGURE EXAMPLE
%----------------------------------------------------------------------------------------

% \begin{figure}[h] % [h] forces the figure to be output where it is defined in the code (it suppresses floating)
% 	\centering
% 	\includegraphics[width=0.5\columnwidth]{IMAGE_NAME.jpg} % Example image
% 	\caption{European swallow.}
% \end{figure}

%----------------------------------------------------------------------------------------
% MATH EXAMPLES
%----------------------------------------------------------------------------------------

% \begin{align} 
% 	\label{eq:bayes}
% 	\begin{split}
% 		P(A|B) = \frac{P(B|A)P(A)}{P(B)}
% 	\end{split}					
% \end{align}

%----------------------------------------------------------------------------------------
%	LIST EXAMPLES
%----------------------------------------------------------------------------------------

% \begin{itemize}
% 	\item First item in a list 
% 		\begin{itemize}
% 		\item First item in a list 
% 			\begin{itemize}
% 			\item First item in a list 
% 			\item Second item in a list 
% 			\end{itemize}
% 		\item Second item in a list 
% 		\end{itemize}
% 	\item Second item in a list 
% \end{itemize}

%------------------------------------------------

% \subsection{Numbered List}

% \begin{enumerate}
% 	\item First item in a list 
% 	\item Second item in a list 
% 	\item Third item in a list
% \end{enumerate}

%----------------------------------------------------------------------------------------
%	TABLE EXAMPLE
%----------------------------------------------------------------------------------------

% \section{Interpreting a Table}

% \begin{table}[h] % [h] forces the table to be output where it is defined in the code (it suppresses floating)
% 	\centering % Centre the table
% 	\begin{tabular}{l l l}
% 		\toprule
% 		\textit{Per 50g} & \textbf{Pork} & \textbf{Soy} \\
% 		\midrule
% 		Energy & 760kJ & 538kJ\\
% 		Protein & 7.0g & 9.3g\\
% 		\bottomrule
% 	\end{tabular}
% 	\caption{Sausage nutrition.}
% \end{table}

%----------------------------------------------------------------------------------------
%	CODE LISTING EXAMPLE
%----------------------------------------------------------------------------------------

% \begin{lstlisting}[
% 	caption= Macro definition, % Caption above the listing
% 	language=python, % Use Julia functions/syntax highlighting
% 	frame=single, % Frame around the code listing
% 	showstringspaces=false, % Don't put marks in string spaces
% 	numbers=left, % Line numbers on left
% 	numberstyle=\large, % Line numbers styling
% 	]

% 	CODE

% \end{lstlisting}

%----------------------------------------------------------------------------------------
%	CODE LISTING FILE EXAMPLE
%----------------------------------------------------------------------------------------

% \lstinputlisting[
% 	caption=Luftballons Perl Script., % Caption above the listing
% 	label=lst:luftballons, % Label for referencing this listing
% 	language=Perl, % Use Perl functions/syntax highlighting
% 	frame=single, % Frame around the code listing
% 	showstringspaces=false, % Don't put marks in string spaces
% 	numbers=left, % Line numbers on left
% 	numberstyle=\tiny, % Line numbers styling
% 	]{luftballons.pl}

%----------------------------------------------------------------------------------------
%	BIB EXAMPLE
%----------------------------------------------------------------------------------------

% Using \texttt{biblatex} you can display a bibliography divided into sections, depending on citation type. 
% Let's cite! Einstein's journal paper \cite{einstein} and Dirac's book \cite{dirac} are physics-related items. 
% Next, \textit{The \LaTeX\ Companion} book \cite{latexcompanion}, Donald Knuth's website \cite{knuthwebsite}, \textit{The Comprehensive Tex Archive Network} (CTAN) \cite{ctan} are \LaTeX-related items; but the others, Donald Knuth's items, \cite{knuth-fa,knuth-acp} are dedicated to programming. 

% \medskip

% \printbibliography[
% heading=bibintoc,
% title={Whole bibliography}
% ] %Prints the entire bibliography with the title "Whole bibliography"

% %Filters bibliography
% \printbibliography[heading=subbibintoc,type=article,title={Articles only}]
% \printbibliography[type=book,title={Books only}]

% \printbibliography[keyword={physics},title={Physics-related only}]
% \printbibliography[keyword={latex},title={\LaTeX-related only}]

\end{document}