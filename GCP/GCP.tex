% Mo Jabeen Template for docs 

\documentclass[11pt]{scrartcl} % Font size

\input{structure.tex} % Include the file specifying the document structure and custom commands

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\title{	
	\normalfont\normalsize
	\vspace{20pt} % Whitespace
	{\huge GCP}\\ % The assignment title
	\vspace{12pt} % Whitespace
	\rule{\linewidth}{2pt}\\ % Thick bottom horizontal rule
}

 \author{\small Mo D Jabeen} % Your name

\date{\normalsize\today} % Today's date (\today) or a custom date

\begin{document}

\maketitle % Print the title

\section{General}

GCP is Google cloud platform, which includes a variety of products from VM instance creation, DB hosting
servers and container orchestration.

\section{VMs (Compute Engine)}

VMs can run standard linux or windows OS. Private images can also be used or containers which are uploaded
onto the container optimized image.\\

Each instance belongs to a \textbf{console project} which can have one or more instances. The zone and
OS and machine type is specified for each instance.\\

Each instance has a default boot persistent disk of 10 GB, any additional storage options can be added.
Each instance also has a network interface associated with a unique VPC network. \\

Tools to manage the VM: Google cloud console, gcloud CML tool, and REST API. Manage Access: OS login or
SSH keys.

\subsubsection{What are instance groups ?}

A collection of VM instances you can manage as a single entity. 

Two types:\\
\textbf{Managed (MIG):} Operate apps on multiple identical VMs, make VMs scalable and highly available
by using automated managed services, autoscaling, autohealing, deployment and updating (PaaS).\\
\textbf{Unmanged (UIG):} Only let you load balance across a fleet otherwise managed by you (IaaS).

\subsection{Managed Instance Groups}

Maintained based on config specified in an instance template and optional stateful config.

Pros:
\begin{itemize}
	\item High Availability (Keep VMs running despite crashes)
	\item Autohealing unexpected VMs states
	\item Regional coverage (switch zones in the same region)
	\item Load balance within the group (traffic or compute)
	\item Autoupdates: Safely deploy new software versions. Flexible scenarios available ie rolling updates
	canary udpates, speed, scope and disruption of services can be tuned.
	\item \textbf{stateful MIGs} preserve each instances unique state on machine restart and update.
	\item Load balance health check: divert traffic from non healthy VMs to healthy ones.
	\item MIG health checks will delete and recreate unhealthy instances.
\end{itemize}

The majority of scenarios checks for load balance healing should be more aggressive whereas the MIG
checks should be more conservative. \\

Two types of MIGs zonal or regional, to use regional MIG autoscaling need Pub/Sub (Queue based workload).

\textbf{Preemtible instances} can be used of speed of execution is less important than costs.

GCP will auto use a default VPC is not configured.

\subsection{Machine Families}

Broken into series and then machines types ie general purpose family, series: NZ and type: n2-standard-4.

\subsubsection{What are the families ?}

\begin{itemize}
	\item General purpose: Best performance price ratio (x86 or Arm architecture)
	\item Compute optimized: Highest performance per core, optimized for compute intensive workloads.
	(Intel scalable processor or AMD EPYC Milan platform)
	\item Memory optimised machine: Ideal for OLAP and OLTP SAP (on line processing) workloads, genomic modelling
	and memory intensive workloads.
	\item Accelerator optimised: Massively parallelized compute unified architecture ML or HPC. Allow GPU usage.
\end{itemize}

\subsubsection{General purpose machines}

Series:
\begin{itemize}
	\item E2 - Cost optimized
	\item N2,N2D,N1 - Balance price/performance
	\item T2D, T2A - Scale out optimized
\end{itemize}

E2 does not support GPUs, local SSD, sole tenant nodes (allocated physical server) or nested virtualization.
N2 has higher memory to core ratios. 

\subsubsection{Other}

\textbf{Rightsizing recommendations:} used to optimise based on workload.\\
\textbf{CPU bursting:} short periods of increased CPU coverage when required.\\
\textbf{Nested VMs} require special hypervisor instructions to allow running additional VMs.

\subsection{SSH connections}

Key based authentication, passwords are not configured by default. SSH key and username need to be saved
to metadata before connection google console and gcloud CLI do this automatically. Either custom project
or instance meta data is used.

An extra layer of security can be added by using guest attributes.

\subsection{Web protection}

Methods:
\begin{itemize}
	\item Firewalls
	\item HTTPS and SSL
	\item Port forwarding over SSH 
	\item SOCKS proxy over SSH (create local names for each server)
\end{itemize}

Access to VMs without external IPs:
\begin{itemize}
	\item Other VMs on the network or Bastion host
	\item Proxy TCP forward
	\item Metadata server
	\item GCP SDK
	\item VPN Gateway
\end{itemize}

\subsection{Transfer files to VM}

Cloud buckets, SSH in browser or gcloud has built in SCP.

\subsubsection{Cloud storage buckets}

Easy to access from multiple, upload any data object affordably.

\subsection{Storage options}

Can choose between zonal or regional.

\begin{itemize}
	\item Standard Persistent disk (PD): Efficient reliable block storage
	\item Balanced PD: Cost effective and reliable block storage
	\item SSD PD: Fast and reliable block storage
	\item Extreme PD: Highest performance persistent block storage
	\item Local SSD: High performance local block storage
	\item Buckets: Affordable object storage
\end{itemize}

\subsection{Data protection options}

\begin{itemize}
	\item Standard snapshots: Capture the state of the disk, good for long term storage.
	\item Archive snapshots: Lower cost than standard snapshots, rarely accessed.
	\item Machine images: Stores all config, meta data, permissions and data from one or more disks.
	can be used to create more VMs.
	\item Regional persistent disks: Replicate data synchronously across two zones.
	\item Disk clone: Create a live attachable, fully provisioned disk with data from source disk
	allowing you to stage environments, backup verification, export net disaster recovery.
	\item Images: Contain the set of programs and files required to boot OS on a VM instance.
\end{itemize}

\subsection{Other}

Start up and shutdown scripts allow commands to be executed at those VM stages.\\

Compute engine uses Network Time Protocol (NTP). Smears the leap second over 24 hours.\\

Vitrio Random number generator is used in GCP.

\section{Cloud Storage}

Create single purpose, standalone, functions that respond to cloud events without needing to manage
a server (serverless). Great for data collection into Big Query.

\section{Anthos}

Build, deploy and optimize VMs (CI/CD).

\section{Cloud run}

Fully managed container orchestration, for partial managed use Google Kubernetes.
%----------------------------------------------------------------------------------------
%	FIGURE EXAMPLE
%----------------------------------------------------------------------------------------

% \begin{figure}[h] % [h] forces the figure to be output where it is defined in the code (it suppresses floating)
% 	\centering
% 	\includegraphics[width=0.5\columnwidth]{IMAGE_NAME.jpg} % Example image
% 	\caption{European swallow.}
% \end{figure}

%----------------------------------------------------------------------------------------
% MATH EXAMPLES
%----------------------------------------------------------------------------------------

% \begin{align} 
% 	\label{eq:bayes}
% 	\begin{split}
% 		P(A|B) = \frac{P(B|A)P(A)}{P(B)}
% 	\end{split}					
% \end{align}

%----------------------------------------------------------------------------------------
%	LIST EXAMPLES
%----------------------------------------------------------------------------------------

% \begin{itemize}
% 	\item First item in a list 
% 		\begin{itemize}
% 		\item First item in a list 
% 			\begin{itemize}
% 			\item First item in a list 
% 			\item Second item in a list 
% 			\end{itemize}
% 		\item Second item in a list 
% 		\end{itemize}
% 	\item Second item in a list 
% \end{itemize}

%------------------------------------------------

% \subsection{Numbered List}

% \begin{enumerate}
% 	\item First item in a list 
% 	\item Second item in a list 
% 	\item Third item in a list
% \end{enumerate}

%----------------------------------------------------------------------------------------
%	TABLE EXAMPLE
%----------------------------------------------------------------------------------------

% \section{Interpreting a Table}

% \begin{table}[h] % [h] forces the table to be output where it is defined in the code (it suppresses floating)
% 	\centering % Centre the table
% 	\begin{tabular}{l l l}
% 		\toprule
% 		\textit{Per 50g} & \textbf{Pork} & \textbf{Soy} \\
% 		\midrule
% 		Energy & 760kJ & 538kJ\\
% 		Protein & 7.0g & 9.3g\\
% 		\bottomrule
% 	\end{tabular}
% 	\caption{Sausage nutrition.}
% \end{table}

%----------------------------------------------------------------------------------------
%	CODE LISTING EXAMPLE
%----------------------------------------------------------------------------------------

% \begin{lstlisting}[
% 	caption= Macro definition, % Caption above the listing
% 	language=python, % Use Julia functions/syntax highlighting
% 	frame=single, % Frame around the code listing
% 	showstringspaces=false, % Don't put marks in string spaces
% 	numbers=left, % Line numbers on left
% 	numberstyle=\large, % Line numbers styling
% 	]

% 	CODE

% \end{lstlisting}

%----------------------------------------------------------------------------------------
%	CODE LISTING FILE EXAMPLE
%----------------------------------------------------------------------------------------

% \lstinputlisting[
% 	caption=Luftballons Perl Script., % Caption above the listing
% 	label=lst:luftballons, % Label for referencing this listing
% 	language=Perl, % Use Perl functions/syntax highlighting
% 	frame=single, % Frame around the code listing
% 	showstringspaces=false, % Don't put marks in string spaces
% 	numbers=left, % Line numbers on left
% 	numberstyle=\tiny, % Line numbers styling
% 	]{luftballons.pl}

%------------------------------------------------

\end{document}